// IW7 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

superslasheragentinit()
{
    _id_DF0C();
}

_id_DF0C()
{
    scripts\aitypes\bt_util::init();
    behaviortree\superslasher::_id_DEE8();
    scripts\asm\superslasher\mp\states::_id_2371();
    thread _id_FAB0();
    level.superslasherspawnspot = ( -4803, 4703, -130 );
    level.superslasherspawnangles = ( 0, -170, 0 );
    level.superslasherrooftopspot = ( -6119, 4829, 355 );
    level.superslasherrooftopangles = ( 0, 10, 0 );
    level.superslashergotogroundspot = ( -5024, 4857, -130 );
    level.superslasherjumptoroofangles = ( 0, -170, 0 );
    loadsuperslasherscriptmodelanim();
    loadsuperslashervfx();
}

loadsuperslasherscriptmodelanim()
{
    precachempanim( "IW7_cp_super_death_01" );
}

loadsuperslashervfx()
{
    level._effect["super_slasher_death_base"] = loadfx( "vfx/iw7/levels/cp_rave/superslasher/vfx_ss_death_base_start.vfx" );
    level._effect["super_slasher_death_hand"] = loadfx( "vfx/iw7/levels/cp_rave/superslasher/vfx_ss_death_hands_glow.vfx" );
    level._effect["super_slasher_death_limb"] = loadfx( "vfx/iw7/levels/cp_rave/superslasher/vfx_ss_death_limbs_glow.vfx" );
    level._effect["super_slasher_shield_hit"] = loadfx( "vfx/iw7/levels/cp_rave/superslasher/vfx_ss_shield_hit.vfx" );
    level._effect["super_slasher_saw_shark_hit"] = loadfx( "vfx/iw7/levels/cp_rave/superslasher/vfx_rave_superslasher_stomp_attack.vfx" );
    level._effect["super_slasher_saw_shark_spark"] = loadfx( "vfx/iw7/levels/cp_rave/superslasher/vfx_rave_superslasher_saw_spark.vfx" );
}

_id_FAB0()
{
    level endon( "game_ended" );

    if ( !isdefined( level._id_18EE ) )
        level waittill( "scripted_agents_initialized" );

    if ( !isdefined( level._id_10970 ) )
        level._id_10970 = [];

    level._id_10970["superslasher"] = [];
    level._id_18EE["superslasher"]["setup_func"] = ::_id_FA8A;
    level._id_18EE["superslasher"]["setup_model_func"] = ::_id_FACE;
    level.agent_funcs["superslasher"] = [];
    level.agent_funcs["superslasher"]["on_damaged"] = ::onsuperslasherdamaged;
    level.agent_funcs["superslasher"]["on_killed"] = ::onsuperslasherkilled;
    level.agent_funcs["superslasher"]["on_damaged_finished"] = ::onsuperslasherdamagefinished;
}

_id_FA8A()
{
    self.class = undefined;
    self._id_BCF6 = undefined;
    self._id_26B9 = undefined;
    self.guid = undefined;
    self.name = undefined;
    self._id_EB6A = undefined;
    self._id_CA5B = undefined;
    self._id_13CA0 = undefined;
    self._id_C2AD = undefined;
    self._id_0291 = undefined;
    self.sessionstate = undefined;
    self._id_55E6 = undefined;
    self._id_55E9 = undefined;
    self._id_55D9 = undefined;
    self._id_55E4 = 1;
    self._id_C026 = undefined;
    self._id_0184 = 0;
    self._id_0180 = 0;
    self._id_116D4 = undefined;
    self._id_441A = undefined;
    self._id_4B82 = undefined;
    self._id_5793 = undefined;
    self._id_37FD = 0;
    self._id_24CA = undefined;
    self._id_6622 = 0;
    self._id_B36E = undefined;
    self._id_126A3 = undefined;
    self._id_8C35 = 0;
    self._id_9341 = 1;
    self._id_9342 = 1;
    self._id_9341 = 1;
    self._id_1B03 = "idle";
    self._id_01F5 = "run";
    self._id_0293 = 150;
    self.radius = 20;
    self.height = 53;
    self._id_252B = 26 + self.radius;
    self._id_2539 = 54;
    self._id_253A = -64;
    self._id_4D45 = 2250000;
    self._id_0181 = 1;
    self.guid = self getentitynumber();
    self._id_BCE4 = 1.0;
    self._id_C081 = 1.0;
    self._id_126E8 = 1.0;
    self._id_772A = 1.0;
    self._id_2AB2 = 0;
    self._id_2AB8 = 1;
    self._id_118FC = 0;
    self._id_002F = 1;
    self._id_503C = self.radius + 1;
    self._id_565C = 0;
    self._id_54CB = 0;
    self._id_9E0C = undefined;
    self._id_6F73 = undefined;
    self._id_565C = 0;
    self._id_B0FC = 1;
    self._id_74B5 = 0;
    self._id_4A7D = 0;
    self.spawn_round_num = level._id_13BD3;
    self.dont_cleanup = 1;
    self._id_013C = 600;
    self._id_013E = 600;
    self._id_013D = 600;
    self._id_0033 = 1;
    self._id_A8A2 = [];
    self._id_A964 = [];
    self._id_A96A = 0;

    if ( getdvarint( "scr_zombie_left_foot_sharp_turn_only", 0 ) == 1 )
        self._id_AB3F = 1;

    thread _id_899C();
}

_id_FACE( var_0 )
{
    self setmodel( "fullbody_zmb_superslasher" );
}

_id_899C()
{
    self endon( "death" );
    level waittill( "game_ended" );
    self._id_1198.bgameended = 1;
}

onsuperslasherkilled( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8 )
{
    self.death_anim_no_ragdoll = 1;
    self._id_C026 = 1;

    if ( isdefined( self.attackents ) )
    {
        foreach ( var_10 in self.attackents )
            var_10 delete();
    }

    if ( isdefined( self.shields ) )
    {
        foreach ( var_13 in self.shields )
            var_13 delete();
    }

    scripts\asm\superslasher\superslasher_actions::stopwireattack();
    thread superslasherdeathscriptmodelsequence( self );
    var_15 = self._id_238F;
    var_16 = self._id_164D[var_15]._id_4BC0;
    var_17 = anim._id_2303[var_15]._id_10E2F[var_16];
    scripts\asm\asm::_id_2388( var_15, var_16, var_17, undefined );
    scripts\mp\mp_agent::_id_5006( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8 );
}

superslasherdeathscriptmodelsequence( var_0 )
{
    level.soul_key_drop_pos = scripts\engine\utility::_id_5D14( var_0.origin, 200, -5000 ) + ( 0, 0, 50 );
    var_1 = var_0.origin;
    var_2 = spawn( "script_model", var_1 );
    var_2 setmodel( "fullbody_zmb_superslasher" );
    var_2 scriptmodelplayanim( "IW7_cp_super_death_01" );
    playloopsound( var_2.origin, "zmb_superslasher_death_lr" );
    var_2 thread super_slasher_death_vfx_sequence( var_2 );
    wait 3.5;
    var_2 moveto( var_1 + ( 0, 0, -300 ), 11.5 );
    var_2 waittill( "movedone" );
    var_2 delete();
    level notify( "super_slasher_death" );
}

super_slasher_death_vfx_sequence( var_0 )
{
    var_1 = spawnfx( level._effect["super_slasher_death_base"], var_0.origin );
    triggerfx( var_1 );
    wait 0.6;
    playfxontag( level._effect["super_slasher_death_hand"], var_0, "j_wrist_ri" );
    playfxontag( level._effect["super_slasher_death_limb"], var_0, "j_hip_ri" );
    wait 0.5;
    playfxontag( level._effect["super_slasher_death_hand"], var_0, "j_wrist_le" );
    wait 0.2;
    playfxontag( level._effect["super_slasher_death_limb"], var_0, "j_hip_le" );
    wait 1.3;
    playfxontag( level._effect["super_slasher_death_limb"], var_0, "j_elbow_le" );
    wait 1;
    playfxontag( level._effect["super_slasher_death_limb"], var_0, "j_clavicle_ri" );
    wait 0.7;
    playfxontag( level._effect["super_slasher_death_limb"], var_0, "j_clavicle_le" );
    var_0 waittill( "movedone" );
    var_1 delete();
}

onsuperslasherdamaged( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11 )
{
    if ( isdefined( var_1 ) && var_1 == self )
        return;

    if ( scripts\engine\utility::_id_9CEE( self._id_00E0 ) && isdefined( var_6 ) && isdefined( var_7 ) )
        playfx( level._effect["super_slasher_shield_hit"], var_6, var_7 * -150 );

    if ( isdefined( self.btrophysystem ) )
    {
        if ( isdefined( var_1 ) && isplayer( var_1 ) )
        {
            self._id_A964[self._id_A964.size] = vectornormalize( var_1.origin - self.origin );
            self._id_A96A = gettime();
        }

        return;
    }

    if ( scripts\engine\utility::_id_9CEE( self._id_00E0 ) )
        return;

    if ( isdefined( self._id_1198.binair ) )
    {
        var_2 = int( min( var_2, self.health - 1 ) );

        if ( var_2 == 0 )
            return;
    }

    if ( var_5 == "iw7_harpoon_zm" )
    {
        var_2 = min( 0.1 * self.maxhealth, 2000 );
        var_2 = int( var_2 );
    }
    else if ( issubstr( var_5, "harpoon1" ) )
    {
        var_2 = min( 0.01 * self.maxhealth, 75 );
        var_2 = int( var_2 );
    }
    else if ( issubstr( var_5, "harpoon2" ) )
    {
        var_2 = min( 0.1 * self.maxhealth, 1500 );
        var_2 = int( var_2 );
    }
    else if ( issubstr( var_5, "harpoon3" ) )
    {
        var_2 = min( 0.1 * self.maxhealth, 2000 );
        var_2 = int( var_2 );
    }
    else if ( issubstr( var_5, "harpoon4" ) )
    {
        var_2 = min( 0.01 * self.maxhealth, 1000 );
        var_2 = int( var_2 );
    }

    var_3 = var_3 | level.idflags_no_knockback;

    if ( isdefined( level.players ) && level.players.size >= 1 )
        var_2 = var_2 / level.players.size;

    scripts\cp\maps\cp_rave\cp_rave_damage::cp_rave_onzombiedamaged( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11 );
}

onsuperslasherdamagefinished( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12 )
{
    scripts\mp\mp_agent::_id_5004( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9, var_10, var_11, var_12 );
}
