// IW7 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_DF0C()
{
    scripts\mp\agents\alien_phantom\alien_phantom_tunedata::setuptunedata();
    scripts\aitypes\bt_util::init();
    behaviortree\alien_goon::_id_DEE8();
    scripts\asm\alien_goon\mp\states::_id_2371();
    thread _id_FAB0();
}

_id_FAB0()
{
    level endon( "game_ended" );

    if ( !isdefined( level._id_18EE ) )
        level waittill( "scripted_agents_initialized" );

    level._id_18EE["alien_phantom"]["setup_func"] = ::_id_FA8A;
    level._id_18EE["alien_phantom"]["setup_model_func"] = ::_id_FACE;
    level.agent_funcs["alien_phantom"]["on_damaged"] = scripts\mp\agents\alien_goon\alien_goon_agent::_id_C4E0;
    level.agent_funcs["alien_phantom"]["gametype_on_damage_finished"] = _id_0CBC::_id_C5CE;
    level.agent_funcs["alien_phantom"]["gametype_on_killed"] = scripts\cp\maps\cp_final\cp_final_damage::cp_final_onzombiekilled;
    level.agent_funcs["alien_phantom"]["on_damaged_finished"] = _id_0F72::_id_C5CE;
    level.agent_funcs["alien_phantom"]["on_killed"] = ::onkilled;
    level.brute_loot_check = [];

    if ( !isdefined( level._id_8CBD ) )
        level._id_8CBD = [];

    level._id_8CBD["alien_phantom"] = ::calculatealienphantomhealth;

    if ( !isdefined( level.damage_feedback_overrride ) )
        level.damage_feedback_overrride = [];
}

_id_FACE( var_0 )
{
    self setmodel( "alien_brute" );
}

_id_FA8A()
{
    scripts\mp\agents\alien_goon\alien_goon_agent::_id_FA8A();
    self._id_B601 = 67;
    self.preventplayerpushdist = 12;
    self.spawn_round_num = level._id_13BD3;
    self._id_9341 = 1;
}

calculatealienphantomhealth()
{
    var_0 = scripts\mp\agents\alien_goon\alien_goon_agent::calculatealiengoonhealth();
    var_1 = scripts\asm\dlc4\dlc4_asm::gettunedata();

    if ( level.players.size < 2 )
        var_0 = var_0 / 2;

    return var_0 * var_1.goon_health_multiplier;
}

onkilled( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8 )
{
    if ( !isdefined( level.no_loot_drop ) || !level.no_loot_drop )
    {
        var_9 = scripts\engine\utility::_id_DC6B( [ "ammo_max", "instakill_30", "cash_2", "instakill_30", "cash_2", "instakill_30", "cash_2" ] );

        if ( isdefined( var_9 ) && !isdefined( self._id_72AC ) )
        {
            if ( !isdefined( level.brute_loot_check[self.spawn_round_num] ) )
            {
                level.brute_loot_check[self.spawn_round_num] = 1;
                level thread _id_0A76::_id_5CF6( self.origin, var_1, var_9, undefined, undefined, 1 );
            }
        }

        var_10 = 400;

        foreach ( var_12 in level.players )
        {
            if ( var_12 _id_0A77::_id_9D05() )
                var_12 _id_0A63::_id_82F9( var_10 );
        }
    }

    if ( self _meth_85B8() )
    {
        level.totalphantomsjumping--;

        if ( level.totalphantomsjumping <= 0 )
            level.totalphantomsjumping = 0;
    }

    _id_0F72::_id_C5D2( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8 );
}
