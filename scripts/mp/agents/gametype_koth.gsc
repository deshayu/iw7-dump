// IW7 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    setup_callbacks();
    _id_F998();
}

_id_F998()
{
    scripts\mp\bots\bots_util::_id_2ECA( 1 );
    thread _id_2DC3();
    level._id_DAA3 = 128;
    level._id_C992 = 800;
    level._id_2DA1 = 1;
}

setup_callbacks()
{
    level.bot_funcs["gametype_think"] = ::_id_2DC4;
}

_id_986A()
{
    var_0 = _id_7809( self.team );
    var_1 = _id_780A( self.team );
    var_2 = _id_2D0F( self.team );
    var_3 = _id_2D50( self.team );
    var_4 = level._id_2E46[self.personality];

    if ( var_4 == "active" )
    {
        if ( var_0.size >= var_2 )
        {
            var_5 = 0;

            foreach ( var_7 in var_0 )
            {
                if ( isai( var_7 ) && level._id_2E46[var_7.personality] == "stationary" )
                {
                    var_7._id_E67C = undefined;
                    var_5 = 1;
                    break;
                }
            }

            if ( var_5 )
            {
                _id_2E84( "attacker" );
                return;
            }

            _id_2E84( "defender" );
            return;
        }
        else
            _id_2E84( "attacker" );
    }
    else if ( var_4 == "stationary" )
    {
        if ( var_1.size >= var_3 )
        {
            var_5 = 0;

            foreach ( var_10 in var_1 )
            {
                if ( isai( var_10 ) && level._id_2E46[var_10.personality] == "active" )
                {
                    var_10._id_E67C = undefined;
                    var_5 = 1;
                    break;
                }
            }

            if ( var_5 )
            {
                _id_2E84( "defender" );
                return;
            }

            _id_2E84( "attacker" );
            return;
        }
        else
            _id_2E84( "defender" );
    }
}

_id_2DC4()
{
    self notify( "bot_grnd_think" );
    self endon( "bot_grnd_think" );
    self endon( "death" );
    self endon( "disconnect" );
    level endon( "game_ended" );
    self botclearscriptgoal();

    while ( !isdefined( level._id_2DA1 ) )
        wait 0.05;

    self botsetflag( "separation", 0 );
    var_0 = undefined;
    var_1 = undefined;

    for (;;)
    {
        wait 0.05;

        if ( scripts\mp\bots\bots_strategy::_id_2DC5() )
            continue;

        if ( !isdefined( self._id_E67C ) )
            _id_986A();

        if ( !scripts\engine\utility::_id_9CEE( self._id_2D51 ) )
        {
            var_0 = undefined;
            var_1 = undefined;
        }

        if ( self._id_E67C == "attacker" )
        {
            var_2 = 0;
            var_1 = undefined;

            if ( !isdefined( var_0 ) )
                var_2 = 1;
            else if ( isdefined( level.zone.gameobject.trigger ) )
            {
                if ( var_0 != level.zone.gameobject.trigger )
                    var_2 = 1;
            }

            if ( var_2 )
            {
                var_3 = getclosestpointonnavmesh( level.zone.gameobject.trigger.origin, self );
                var_4["min_goal_time"] = 1;
                var_4["max_goal_time"] = 4;
                scripts\mp\bots\bots_strategy::_id_2E3D( var_3, level._id_C992, var_4 );
                var_0 = level.zone.gameobject.trigger;
            }

            continue;
        }

        if ( self._id_E67C == "defender" )
        {
            var_0 = undefined;
            var_5 = 0;

            if ( !isdefined( var_1 ) )
                var_5 = 1;
            else if ( isdefined( level.zone.gameobject.trigger ) )
            {
                if ( var_1 != level.zone.gameobject.trigger )
                    var_5 = 1;
            }

            if ( var_5 )
            {
                var_6 = getnodesintrigger( level.zone.gameobject.trigger );

                if ( var_6.size > 0 )
                {
                    var_4["min_goal_time"] = 3;
                    var_4["max_goal_time"] = 6;
                    scripts\mp\bots\bots_strategy::_id_2D2C( level.zone.gameobject.trigger.origin, var_6, level.zone.gameobject.trigger, var_4 );
                    var_1 = level.zone.gameobject.trigger;
                }
            }
        }
    }
}

_id_2D0F( var_0 )
{
    var_1 = _id_7B3C( var_0 );
    return int( int( var_1 ) / 2 ) + 1 + int( var_1 ) % 2;
}

_id_2D50( var_0 )
{
    var_1 = _id_7B3C( var_0 );
    return max( int( int( var_1 ) / 2 ) - 1, 0 );
}

_id_7B3C( var_0 )
{
    var_1 = 0;

    foreach ( var_3 in level._id_C928 )
    {
        if ( scripts\mp\utility\game::_id_9F9D( var_3 ) && isdefined( var_3.team ) && var_3.team == var_0 )
            var_1++;
    }

    return var_1;
}

_id_7809( var_0 )
{
    var_1 = _id_7BBE( "attacker", var_0 );

    if ( isdefined( level.zone.gameobject.trigger ) )
    {
        foreach ( var_3 in level.players )
        {
            if ( !isai( var_3 ) && isdefined( var_3.team ) && var_3.team == var_0 )
            {
                if ( !var_3 istouching( level.zone.gameobject.trigger ) )
                    var_1 = scripts\engine\utility::_id_2279( var_1, var_3 );
            }
        }
    }

    return var_1;
}

_id_780A( var_0 )
{
    var_1 = _id_7BBE( "defender", var_0 );

    if ( isdefined( level.zone.gameobject.trigger ) )
    {
        foreach ( var_3 in level.players )
        {
            if ( !isai( var_3 ) && isdefined( var_3.team ) && var_3.team == var_0 )
            {
                if ( var_3 istouching( level.zone.gameobject.trigger ) )
                    var_1 = scripts\engine\utility::_id_2279( var_1, var_3 );
            }
        }
    }

    return var_1;
}

_id_7BBE( var_0, var_1 )
{
    var_2 = [];

    foreach ( var_4 in level._id_C928 )
    {
        if ( !isdefined( var_4.team ) )
            continue;

        if ( isalive( var_4 ) && scripts\mp\utility\game::_id_9F9D( var_4 ) && var_4.team == var_1 && isdefined( var_4._id_E67C ) && var_4._id_E67C == var_0 )
            var_2[var_2.size] = var_4;
    }

    return var_2;
}

_id_2E84( var_0 )
{
    self._id_E67C = var_0;
    self botclearscriptgoal();
    scripts\mp\bots\bots_strategy::_id_2D4E();
}

_id_9B74( var_0, var_1 )
{
    var_2 = var_0 istouching( level.zone.gameobject.trigger );
    var_3 = var_1 istouching( level.zone.gameobject.trigger );

    if ( var_2 != var_3 )
    {
        if ( var_2 )
            return 0;

        return 1;
    }

    if ( var_2 )
    {
        if ( var_0._id_E67C != var_1._id_E67C )
        {
            if ( var_1._id_E67C == "defender" )
                return 1;

            return 0;
        }
    }

    var_4 = distance2dsquared( var_0.origin, level.zone.gameobject.trigger.origin );
    var_5 = distance2dsquared( var_1.origin, level.zone.gameobject.trigger.origin );

    if ( var_4 < var_5 )
        return 1;

    return 0;
}

_id_2DC3()
{
    level notify( "bot_hardpoint_ai_director_update" );
    level endon( "bot_hardpoint_ai_director_update" );
    level endon( "game_ended" );
    var_0[0] = "allies";
    var_0[1] = "axis";
    var_1["allies"] = 0;
    var_1["axis"] = 0;

    for (;;)
    {
        var_2 = "neutral";

        if ( isdefined( level.zone.gameobject.trigger ) )
            var_2 = level.zone.gameobject scripts\mp\gameobjects::_id_803E();

        foreach ( var_4 in var_0 )
        {
            var_5 = [];
            var_6 = [];

            if ( var_4 != var_2 )
            {
                var_1[var_4] = 0;

                foreach ( var_8 in level._id_C928 )
                {
                    if ( scripts\mp\utility\game::_id_9F9D( var_8 ) && isdefined( var_8.team ) && var_8.team == var_4 )
                    {
                        if ( isbot( var_8 ) && ( !isdefined( var_8._id_E67C ) || var_8._id_E67C != "defender" ) )
                            var_8 _id_2E84( "defender" );
                    }
                }

                continue;
            }

            var_10 = _id_2D0F( var_4 );
            var_11 = _id_2D50( var_4 );

            if ( !var_1[var_4] )
            {
                var_1[var_4] = 1;
                var_12 = [];

                foreach ( var_8 in level._id_C928 )
                {
                    if ( scripts\mp\utility\game::_id_9F9D( var_8 ) && isdefined( var_8.team ) && var_8.team == var_4 )
                    {
                        if ( isbot( var_8 ) )
                            var_12[var_12.size] = var_8;
                    }
                }

                var_15 = scripts\engine\utility::_id_22C3( var_12, ::_id_9B74 );

                if ( var_12.size < var_11 )
                    var_11 = var_12.size;

                var_11 = int( var_11 );

                for ( var_16 = 0; var_16 < var_11; var_16++ )
                    var_12[var_16] _id_2E84( "defender" );

                for ( var_16 = var_11; var_16 < var_12.size; var_16++ )
                    var_12[var_16] _id_2E84( "attacker" );

                wait 1;
                continue;
            }

            var_17 = _id_7809( var_4 );
            var_18 = _id_780A( var_4 );

            if ( var_17.size > var_10 )
            {
                var_19 = 0;

                foreach ( var_21 in var_17 )
                {
                    if ( isai( var_21 ) )
                    {
                        if ( level._id_2E46[var_21.personality] == "stationary" )
                        {
                            var_21 _id_2E84( "defender" );
                            var_19 = 1;
                            break;
                        }
                        else
                            var_5 = scripts\engine\utility::_id_2279( var_5, var_21 );
                    }
                }

                if ( !var_19 && var_5.size > 0 )
                    scripts\engine\utility::_id_DC6B( var_5 ) _id_2E84( "defender" );
            }

            if ( var_18.size > var_11 )
            {
                var_23 = 0;

                foreach ( var_25 in var_18 )
                {
                    if ( isai( var_25 ) )
                    {
                        if ( level._id_2E46[var_25.personality] == "active" )
                        {
                            var_25 _id_2E84( "attacker" );
                            var_23 = 1;
                            break;
                        }
                        else
                            var_6 = scripts\engine\utility::_id_2279( var_6, var_25 );
                    }
                }

                if ( !var_23 && var_6.size > 0 )
                    scripts\engine\utility::_id_DC6B( var_6 ) _id_2E84( "attacker" );
            }

            if ( var_18.size == 0 )
            {
                var_27 = _id_7BBE( "attacker", var_4 );

                if ( var_27.size > 0 )
                    scripts\engine\utility::_id_DC6B( var_27 ) _id_2E84( "defender" );
            }
        }

        wait 1.0;
    }
}

_id_4830( var_0 )
{
    if ( isagent( self ) && !isdefined( var_0.boxtype ) )
        return 0;

    if ( isdefined( var_0._id_485F ) && !scripts\mp\bots\bots_killstreaks::_id_2DDB( var_0._id_485F ) )
        return 0;

    return !scripts\mp\bots\bots_util::_id_2DD7() || scripts\mp\bots\bots_util::_id_2DDD();
}

_id_B9B0()
{
    self notify( "monitor_zone_control" );
    self endon( "monitor_zone_control" );
    self endon( "death" );
    level endon( "game_ended" );

    for (;;)
    {
        wait 1;
        var_0 = 0;

        if ( isdefined( level._id_DBFD ) && self._id_1270F == level._id_DBFD.trigger )
        {
            var_1 = level._id_DBFD scripts\mp\gameobjects::_id_803E();

            if ( var_1 != "neutral" )
            {
                var_2 = getzonenearest( self.origin );

                if ( isdefined( var_2 ) )
                {
                    botzonesetteam( var_2, var_1 );
                    var_0 = 1;
                }
            }
        }

        if ( !var_0 )
        {
            var_2 = getzonenearest( self.origin );

            if ( isdefined( var_2 ) )
                botzonesetteam( var_2, "free" );
        }
    }
}

_id_F8DE()
{
    scripts\mp\bots\bots_util::_id_2ECA();

    while ( !isdefined( level._id_DBFE ) )
        wait 0.05;

    scripts\mp\bots\bots_strategy::_id_2E8A();

    for ( var_0 = 0; var_0 < level._id_DBFE.size; var_0++ )
    {
        level._id_DBFE[var_0]._id_EDF9 = "_" + var_0;
        level._id_DBFE[var_0] thread _id_B9B0();
    }

    scripts\mp\bots\bots_util::_id_2D1A( level._id_DBFE, "radio" );
    level._id_2DA1 = 1;
}

_id_2DC6()
{
    self notify( "bot_hq_think" );
    self endon( "bot_hq_think" );
    self endon( "death" );
    self endon( "disconnect" );
    level endon( "game_ended" );

    while ( !isdefined( level._id_2DA1 ) )
        wait 0.05;

    self botsetflag( "grenade_objectives", 1 );
    _id_9559();

    for (;;)
    {
        var_0 = randomintrange( 1, 11 ) * 0.05;
        wait( var_0 );

        if ( self.health <= 0 )
            continue;

        if ( !isdefined( level._id_DBFD ) )
        {
            if ( scripts\mp\bots\bots_util::_id_2DD7() )
                scripts\mp\bots\bots_strategy::_id_2D4E();

            var_1 = 1;

            if ( self botgetscriptgoaltype() != "none" )
            {
                var_2 = distancesquared( self botgetscriptgoal(), self.origin );
                var_3 = self botgetscriptgoalradius();

                if ( var_2 > var_3 * var_3 )
                    var_1 = 0;
            }

            if ( var_1 )
            {
                var_4 = self botfindnoderandom();

                if ( isdefined( var_4 ) )
                    self botsetscriptgoal( var_4.origin, 128, "hunt" );
            }

            continue;
        }

        var_5 = level._id_DBFD scripts\mp\gameobjects::_id_803E();

        if ( self.team != var_5 )
        {
            if ( !_id_9B83() )
            {
                var_6 = _id_7B2C();
                var_7 = _id_6C85()._id_2E28.size;

                if ( var_6 < var_7 )
                    _id_3A36();
                else if ( !_id_9C94() )
                    _id_DAA1();
            }
        }
        else if ( !_id_9C94() )
        {
            wait( randomfloat( 2 ) );

            if ( isdefined( level._id_DBFD ) )
                _id_DAA1();
        }
    }
}

_id_6C85()
{
    foreach ( var_1 in level._id_DBFE )
    {
        if ( var_1._id_1270F == level._id_DBFD.trigger )
            return var_1;
    }
}

_id_9B83()
{
    return scripts\mp\bots\bots_util::_id_2DD5();
}

_id_7B2C()
{
    var_0 = 0;

    foreach ( var_2 in level._id_C928 )
    {
        if ( isai( var_2 ) && var_2.health > 0 && var_2.team == self.team && var_2 _id_9B83() )
            var_0++;
    }

    return var_0;
}

_id_3A36()
{
    var_0 = _id_6C85();
    var_1["entrance_points_index"] = "radio" + var_0._id_EDF9;
    scripts\mp\bots\bots_strategy::_id_2D2C( var_0.origin, var_0._id_2E28, undefined, var_1 );
}

_id_9C94()
{
    return scripts\mp\bots\bots_util::_id_2DDD();
}

_id_DAA1()
{
    var_0 = self botgetworldsize();
    var_1 = ( var_0[0] + var_0[1] ) / 2;
    var_2 = min( 1000, var_1 / 4 );
    scripts\mp\bots\bots_strategy::_id_2E57( _id_6C85().origin, var_2 );
}

_id_9559()
{
    if ( isdefined( level._id_2EF4 ) && level._id_2EF4 )
        return;

    level._id_2EF4 = 1;

    foreach ( var_1 in level._id_DBFE )
        var_1._id_2E28 = getnodesintrigger( var_1._id_1270F );
}
